### 1、Zookeeper宕机与Dubbo直连

现象：Zookeeper注册中心宕机，还可以调用消费者服务

原因：

- 监控中心全部宕机之后，服务提供者和服务消费者仍然可以通过本地缓存通讯
- 可以使用Dubbo直连方式，即在@Reference注解的url参数重指定服务提供者的地址

### 2、集群模式下Dubbo的负载均衡机制

在集群模式下，Dubbo提供了多种负载均衡模式，默认为random随机调用方式。

负载均衡策略：

- Random：随机选择，可以按照权重设置随机概率
- RoundRobin：轮询，基于权重的负载均衡策略，可以为每一个提供者设置轮询的概率权重。存在慢的提供者累积请求的问题。
- LeastActive：最少活跃数，最少活跃调用次数，相同活跃数的随机，活跃数指的是调用前后的计数差。“能者多劳”的思想。
- ConsistentHash：一致性哈希。相同参数的请求总是发送给同一个提供者。当某一台提供者宕机后，原本发往该提供者的请求，基于虚拟节点，平摊到其他提供者，不会引起剧烈变动。

### 3、服务降级

- 当服务器压力剧增的情况下，根据实际业务情况和流量，对一些服务或页面有策略的不处理或换种简单的方式处理，从而释放服务器资源以保证核心交易正常运行。
- 可以通过服务降级功能临时屏蔽某个出错的非关键服务，并定义降级后的返回策略。

### 4、服务容错与Hystrix