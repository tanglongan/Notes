### 1、属性覆盖策略

- dubbo支持多种方式指定参数配置方式：运行时参数、XML配置、Properties属性配置。

- 优先级依次由高到低：运行时参数、XML参数配置、Properties参数配置

​     eg：（1）设置JVM运行时参数，-Ddubbo.protocol.port=20080

​		      （2）XML参数配置，<dubbo:protocol port="30080"/>

​		      （3）Properties参数配置，dubbo.protocol.port=40080

### 2、启动时检查

Dubbo默认情况下在启动时检查依赖的服务是否可用，不可用就会抛出异常。默认是`check="true"`。

- 可通过设置`check=false`关闭检查，比如测试时有些服务不关心或者出现服务循环依赖，必须有一方先启动。

- 如果Spring容器是懒加载的，或者通过API延迟引用服务，请关闭check，否则服务临时不可用时会抛出异常，拿到null引用，如果`check=false`，总会返回引用，当服务恢复时能自动连接上。

### 3、超时与配置覆盖关系

- 请求响应超时：服务消费者默认的接口调用超时时间是1000ms，即1秒钟，就是说服务提供者接口超过这个时间不能响应返回的话，消费者端就会抛出调用异常。
- 配置覆盖关系
    - 方法级优先，接口级次之，全局配置最后
    - 如果级别一样，则消费房优先，提供方次之

###  4、本地存根&本地伪装

​	本地存根和本地伪装就是在消费方部署实现了一个目标接口的伪服务。用于在调用真正服务的前后处理工作，其职能有点类似于Spring的AOP。

#### 	4.1、为什么需要？

- 本地存根：通常情况下，调用接口之前都会生成一个请求对象。并且对请求对象中的必传字段以及类型做了一定的校验，如果不满足调用条件，可能需要抛出异常或者其他处理方式，所以本地存根的作用就是预处理信息。

- 本地伪装：如果请求条件达到了接口调用条件，但是调用异常了，可以通过本地伪装的方式，mock一个对象返回。可以认为值服务消费方自己做了一个容错处理机制。

    综上所述，stub service和mock service相当于spring AOP功能。

### 5、Dubbo与SpringBoot整合的三种方式

​	首先三种方式都需要导入dubbo-spring-boot-starter，然后可以通过如下3种方式进行配置

- 在application.properties文件配置属性，使用@Service注解暴露服务@Reference注解引用服务。
- 使用dubbo的xml配置文件的方式，在SpringBoot主类上通过@ImportResource注解将XML配置文件导入即可
-  在sprintboot中@Configuration和@Bean注解，使用Java Config的方式加载dubbo的配置





























